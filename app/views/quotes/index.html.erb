<!--
<a class="bookmarklet" href='javascript:(function(){
    well = function() {
      log = true;

      if(log) console.log("r: Try section");
      try {
        if(!document.body)
          throw(0);

        if(document.getSelection().toString() === "") {
          alert("Empty selection.");
          throw(0);
        } else {
          
          text      = encodeURIComponent(document.getSelection().toString());
          url       = encodeURIComponent(document.location.href.toString());
          token     = "<%= @user.token %>";
          rel       = "icon";
          fi        = function() {
                      if(document.querySelectorAll("link[rel~=" +rel +"]").length > 0)
                        return encodeURIComponent(document.querySelectorAll("link[rel~=" +rel +"]")[0].href);
                      else
                        return encodeURIComponent("http://" +document.location.hostname +"/favicon.ico");
                    };

          query     = "//localhost:3000/quotes/add?user_token=" +token +"&text=";

          script    = document.createElement("script");
          script.src  = query + text + "&url=" + url + "&favicon=" + fi() + "&callback=status";
        }

        /* TAKES CARE OF JSONP RESPONSE */
        jsonp = document.createElement("script");
        jsonp.setAttribute("type", "text/javascript");

        callback = "function status(data) {
          headline.innerText = data.message;
          popup.innerHTML = headline.outerHTML;
          counter = 0;
          interval = setInterval(function() {
            counter += 25;
            wait = 350;
            if(counter > wait) {
              value = counter - wait;
              popup.style.opacity = popup.style.opacity - (value/1000);
              document.body.removeChild(popup);
              document.body.appendChild(popup);
              if(counter === 1500) {
                clearInterval(interval);
                counter = 0;
                document.body.removeChild(popup);
              }
            }
          }, 50);
        }";

        jsonp.innerHTML = callback;
        document.body.appendChild(jsonp);
        
        /* CREATES POPUP */
        headline = document.createElement("h1");
        headline.id = "well-title";
        headline.style.textAlign = "center";
        headline.style.width = "175px";
        headline.innerText = "SAVING..";

        popup = document.createElement("div");
        popup.style.width = "175px";
        popup.style.padding = "25px";
        popup.style.zIndex = "20000";
        popup.style.position = "fixed";
        popup.style.top = "0";
        popup.style.opacity = "1";
        popup.innerHTML = headline.outerHTML;
        document.body.appendChild(popup);

        /* EXECUTE SCRIPT */
        document.body.appendChild(script);

      } catch(e) {
        alert("Please wait until the page has loaded.");
      }
    };

    if(/Firefox/.test(navigator.userAgent)) {
      setTimeout(well,0);
    } else {
      well();
    }})()'>
    NOTED
</a>
!-->

<!-- The form wraps all of the content control features to simplify AJAX query !-->
<%= form_tag quotes_path, :method => 'get', :remote => true, :id => "search-filter" do %>

     <!-- Includes all of the filter controls !-->
     <div class="topbar">
          <div class="filters-container">
               <h2>Filters</h2>
               <button class="reset" type="reset">Reset</button>
          </div>
          <button class="menu-button"></button>
          <div class="search-container">
                    <%= image_tag "search.png" %>
               <div>
                    <%= text_field_tag :search, params[:search], :placeholder => "What are you looking for?", :class => "search" %>
                    <%= submit_tag "Search", :name => nil, :class => 'submit' %>
               </div>
         </div>

     </div>


<!-- END OF FORM !-->

<div class="sidebar">
          <ol class="filters-list">
               <% @sources.each do |source| %>
                    <%= render :partial => 'source', locals: { source: source } %>
               <% end %>
          </ol>
</div>
<% end %>

<div class="quotes-container">
     <ol>
          <% if !@quotes.nil? %>
               <% @quotes.each do |quote| %>
                    <%= render :partial => 'quote', locals: { quote: quote } %>
               <% end %>
          <% end %>
     </ol>
</div>
