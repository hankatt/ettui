/* Remove existing popups */
$(".popup").fadeOut('fast', function() {
	$(".popup").remove();
});

// Append popup to the quote
quote_container = $(".quote.q-<%= @quote.id %>");
quote_container.append("<%= escape_javascript(render :partial => 'quotes/popup', locals: { quote: @quote, tags: @unused_tags }) %>");

// Position popup
popup = $(".popup");
popup.css('bottom', 70);
popup.css('left', -89);

// Reveal popup
$(".popup").fadeIn('fast');
$(".popup .popup-new-tag").focus();

// Trigger DOMChange to assure jQuery events trigger on newly appended tag
$(document).trigger('DOMChange');