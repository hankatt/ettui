var quote_tags_container = $(".quote.q-<%= @quote.id %>").find('.quote-tags');
var sidebar_tags_container = $(".sidebar-list.tags");

// Remove @tag from @quote
quote_tags_container.children(".t-<%= @tag.id %>").remove();

<% if @tag.context_count > 0 %> // Fetch the sidebar tag and update count

	sidebar_tag = sidebar_tags_container.children(".t-<%= @tag.id %>");
	sidebar_tag.html("<%= escape_javascript(render :partial => 'shared/tag_data', locals: { tag: @tag }) %>");

<% else %> // Remove from the tags list on the sidebar

	sidebar_tags_container.children(".t-<%= @tag.id %>").remove();
	
<% end %>

// Trigger DOMChange to assure jQuery events trigger on newly appended tag
$(document).trigger('DOMChange');